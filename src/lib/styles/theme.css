:root {
  /* Graphite / steel + SDI red (minimal blue cast) */
  --bg-0: #07080b;
  --bg-1: #0b0d12;
  --bg-2: #12151c;

  --surface-0: rgba(18, 21, 28, .78);
  --surface-1: rgba(22, 26, 34, .82);
  --surface-2: rgba(26, 31, 40, .86);

  --text: rgba(255, 255, 255, .92);
  --muted: rgba(255, 255, 255, .72);
  --faint: rgba(255, 255, 255, .56);

  --grid-1: rgba(255, 255, 255, .11);
  --grid-2: rgba(255, 255, 255, .06);

  --accent: #c8102e;
  /* SDI red */
  --accent-1: rgba(200, 16, 46, .62);
  --accent-2: rgba(200, 16, 46, .30);
  --accent-3: rgba(200, 16, 46, .15);
  --today: rgba(200, 16, 46, .14);
  /* uniform today column */
  --focus-ring: 0 0 0 3px rgba(200, 16, 46, .22);

  --interactive-bg: rgba(255, 255, 255, .06);
  --interactive-bg-hover: rgba(255, 255, 255, .09);
  --interactive-border: rgba(255, 255, 255, .14);
  --interactive-border-hover: rgba(200, 16, 46, .50);

  --team-cell-hover: rgba(200, 16, 46, .12);
  --team-cell-active: rgba(200, 16, 46, .18);

  --modal-backdrop: rgba(0, 0, 0, .52);
  --modal-surface: linear-gradient(180deg, rgba(200, 16, 46, .10), rgba(200, 16, 46, .04) 22%, rgba(18, 21, 28, .95) 58%, rgba(12, 14, 18, .96));
  --modal-border: rgba(200, 16, 46, .38);
  --panel-bg: rgba(255, 255, 255, .04);
  --table-header-bg: rgba(255, 255, 255, .06);
  --input-bg: rgba(255, 255, 255, .04);

  /* Status colors (kept distinct; not part of global theme) */
  --work: #2dd4bf;
  --off: rgba(255, 255, 255, .24);
  --vac: #60a5fa;
  --hldy: #fbbf24;
  --oot: #a78bfa;

  --radius: 16px;
  --radius-sm: 12px;
  --shadow: 0 18px 48px rgba(0, 0, 0, .60);
  --shadow-soft: 0 10px 26px rgba(0, 0, 0, .40);

  --scrollbar-size: 4px;
  --scrollbar-radius: 999px;
  --scrollbar-track-bg: rgba(255, 255, 255, .04);
  --scrollbar-thumb-bg: rgba(200, 16, 46, .30);
  --scrollbar-thumb-bg-hover: rgba(200, 16, 46, .42);
  --scrollbar-thumb-border: 1px solid rgba(0, 0, 0, .35);
  --schedule-card-top-gap: 10px;
}

* {
  box-sizing: border-box;
}

:where(*) {
  scrollbar-color: var(--scrollbar-thumb-bg) var(--scrollbar-track-bg);
  scrollbar-width: thin;
}

:where(*)::-webkit-scrollbar {
  width: var(--scrollbar-size);
  height: var(--scrollbar-size);
}

:where(*)::-webkit-scrollbar-track {
  background: var(--scrollbar-track-bg);
  border-radius: var(--scrollbar-radius);
}

:where(*)::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb-bg);
  border: var(--scrollbar-thumb-border);
  border-radius: var(--scrollbar-radius);
}

:where(*)::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-bg-hover);
}

body.scrollbar-dragging,
body.scrollbar-dragging * {
  cursor: grabbing !important;
}

body.scrollbar-dragging * {
  pointer-events: none !important;
}

body.scrollbar-dragging .teamSetupScrollRail,
body.scrollbar-dragging .teamSetupScrollThumb,
body.scrollbar-dragging .gridScrollRail,
body.scrollbar-dragging .gridScrollThumb,
body.scrollbar-dragging .gridScrollRailHorizontal,
body.scrollbar-dragging .gridScrollThumbHorizontal {
  pointer-events: auto !important;
}

html,
body {
  height: 100%;
}

body {
  margin: 0;
  color: var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;

  /* Neutral steel base (no blue wash) + SDI red energy */
  background:
    radial-gradient(1100px 520px at 50% -10%, rgba(200, 16, 46, .26), transparent 60%),
    radial-gradient(900px 500px at 12% 12%, rgba(255, 255, 255, .06), transparent 62%),
    radial-gradient(900px 520px at 88% 14%, rgba(255, 255, 255, .05), transparent 62%),
    linear-gradient(180deg, var(--bg-2), var(--bg-0));
  position: relative;
  overflow-x: hidden;
}

/* Industrial grain + subtle steel striation (neutral) */
body::before {
  content: "";
  position: fixed;
  inset: -40px;
  pointer-events: none;
  background:
    repeating-linear-gradient(135deg, rgba(255, 255, 255, .022) 0, rgba(255, 255, 255, .022) 1px, transparent 1px, transparent 12px),
    radial-gradient(1200px 600px at 50% 20%, rgba(255, 255, 255, .040), transparent 65%);
  mix-blend-mode: overlay;
  opacity: .62;
  transform: translateZ(0);
}

.app {
  max-width: 1600px;
  margin-inline: auto;
  padding: var(--schedule-card-top-gap) 16px max(0px, calc(22px - var(--schedule-card-top-gap)));
  position: relative;
}

.card {
  /* Unified container: subtle rounding + SDI red border */
  border: 1px solid rgba(200, 16, 46, .50);
  border-radius: 14px;
  box-shadow: none;
  background: rgba(0, 0, 0, .10);
  overflow: visible;
  position: relative;
}

.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  background:
    linear-gradient(180deg, rgba(200, 16, 46, .20), rgba(200, 16, 46, .06) 62%, rgba(0, 0, 0, .10));
  border-bottom: 1px solid rgba(200, 16, 46, .26);
  backdrop-filter: blur(10px);
}

.title {
  font-weight: 980;
  letter-spacing: .03em;
  font-size: 18px;
  line-height: 1.2;
}

.legend {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
  padding: 10px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, .08);
  background:
    linear-gradient(180deg, rgba(255, 255, 255, .03), rgba(0, 0, 0, .06));
}

.pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, .12);
  font-weight: 920;
  font-size: 12px;
  letter-spacing: .03em;
  user-select: none;
  background: rgba(255, 255, 255, .04);
}

.dot {
  width: 12px;
  height: 12px;
  border-radius: 999px;
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .25);
}

.pill.work {
  border-color: rgba(45, 212, 191, .35);
}

.pill.vac {
  border-color: rgba(96, 165, 250, .35);
}

.pill.hldy {
  border-color: rgba(251, 191, 36, .35);
}

.pill.oot {
  border-color: rgba(167, 139, 250, .35);
}

.work .dot {
  background: var(--work);
}

.vac .dot {
  background: var(--vac);
}

.hldy .dot {
  background: var(--hldy);
}

.oot .dot {
  background: var(--oot);
}

.off .dot {
  background: transparent;
  box-shadow: inset 0 0 0 2px var(--off);
}

.monthbar {
  position: relative;
  z-index: 80;
  overflow: visible;
  padding: 10px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, .08);
  background:
    linear-gradient(90deg, rgba(200, 16, 46, .24) 0, rgba(200, 16, 46, .08) 24%, rgba(255, 255, 255, .02) 62%, rgba(0, 0, 0, .06) 100%);
}

.monthbar-inner {
  position: relative;
  z-index: 81;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.monthbar-title {
  font-weight: 980;
  letter-spacing: .03em;
}

.monthbar-controls {
  position: relative;
  z-index: 82;
  overflow: visible;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px;
}

.btn {
  appearance: none;
  border: 1px solid var(--interactive-border);
  background: var(--interactive-bg);
  color: var(--text);
  font-weight: 900;
  border-radius: 12px;
  padding: 8px 11px;
  cursor: pointer;
  transition: transform .06s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
  user-select: none;
}

.btn:hover {
  background: var(--interactive-bg-hover);
  border-color: var(--interactive-border-hover);
  box-shadow: var(--shadow-soft);
}

.btn:active {
  transform: translateY(1px);
}

.btn.primary {
  background: linear-gradient(180deg, rgba(200, 16, 46, .46), rgba(200, 16, 46, .18));
  border-color: rgba(200, 16, 46, .62);
  box-shadow: none;
}

.btn.primary:hover {
  background: linear-gradient(180deg, rgba(200, 16, 46, .56), rgba(200, 16, 46, .20));
}

/* Theme toggle */
.modeToggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  height: 34px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--interactive-border);
  background: var(--interactive-bg);
  color: var(--text);
  font-weight: 900;
  letter-spacing: .02em;
  cursor: pointer;
  user-select: none;
  transition: transform .06s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
}

.modeToggle:hover {
  background: var(--interactive-bg-hover);
  border-color: var(--interactive-border-hover);
  box-shadow: var(--shadow-soft);
}

.modeToggle:active {
  transform: translateY(1px);
}

.modeIcon {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  flex: 0 0 18px;
}

.modeIcon svg {
  width: 18px;
  height: 18px;
  display: block;
}

.modeText {
  font-size: 12px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: translateY(-0.5px);
}

select {
  color: var(--text);
  background: rgba(0, 0, 0, .14);
  border: 1px solid rgba(255, 255, 255, .14);
  border-radius: 12px;
  padding: 8px 10px;
  font-weight: 900;
  outline: none;
}

select:focus {
  border-color: rgba(200, 16, 46, .72);
  box-shadow: 0 0 0 3px rgba(200, 16, 46, .22);
}

/* ---------------- Custom Month/Year dropdowns ---------------- */
.nativeHidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.picker {
  position: relative;
  display: inline-flex;
  z-index: 1;
}

.pickerBtn {
  appearance: none;
  border: 1px solid var(--interactive-border);
  background: var(--interactive-bg);
  color: var(--text);
  font-weight: 900;
  border-radius: 12px;
  padding: 8px 12px;
  cursor: pointer;
  user-select: none;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  transition: transform .06s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
}

.pickerBtn:hover {
  background: var(--interactive-bg-hover);
  border-color: var(--interactive-border-hover);
  box-shadow: var(--shadow-soft);
}

.pickerBtn:active {
  transform: translateY(1px);
}

.pickerBtn:focus-visible {
  outline: none;
  border-color: rgba(200, 16, 46, .72);
  box-shadow: var(--focus-ring);
}

.chev {
  width: 10px;
  height: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  transform-origin: 50% 50%;
  opacity: .9;
  transition: transform .12s ease;
}

.pickerBtn[aria-expanded="true"] .chev {
  transform: rotate(180deg);
}

/* Menu: matches the app's glass + SDI red trim */
.pickerMenu {
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  min-width: 220px;
  max-height: 320px;
  overflow: auto;
  padding: 8px;
  border-radius: 14px;
  z-index: 200;

  background:
    linear-gradient(180deg, rgba(200, 16, 46, .12), rgba(200, 16, 46, .04) 18%, rgba(18, 21, 28, .86) 40%, rgba(12, 14, 18, .92));
  border: 1px solid rgba(200, 16, 46, .42);
  box-shadow: var(--shadow);
  backdrop-filter: blur(12px);

  /* animated open/close */
  opacity: 0;
  transform: translateY(-6px) scale(.985);
  visibility: hidden;
  pointer-events: none;
  transition: opacity .12s ease, transform .12s ease, visibility 0s linear .12s;

}

.pickerMenu.open {
  opacity: 1;
  transform: translateY(0) scale(1);
  visibility: visible;
  pointer-events: auto;
  transition: opacity .12s ease, transform .12s ease, visibility 0s;
}

.pickerItem {
  width: 100%;
  appearance: none;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text);
  font-weight: 900;
  letter-spacing: .01em;
  text-align: left;
  border-radius: 12px;
  padding: 10px 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  position: relative;
}

.pickerItem:hover {
  background: rgba(255, 255, 255, .06);
  border-color: rgba(255, 255, 255, .08);
}

.pickerItem:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(200, 16, 46, .22);
  border-color: rgba(200, 16, 46, .55);
}

.pickerItem[aria-selected="true"] {
  background: linear-gradient(180deg, rgba(200, 16, 46, .22), rgba(200, 16, 46, .10));
  border-color: rgba(200, 16, 46, .40);
}

.pickerItem[aria-selected="true"]::before {
  content: "";
  position: absolute;
  left: 6px;
  top: 8px;
  bottom: 8px;
  width: 3px;
  border-radius: 999px;
  background: rgba(200, 16, 46, .90);
  opacity: .75;
}

.pickerItem .check {
  opacity: .92;
}

:root[data-theme="light"] .pickerBtn {
  background: rgba(255, 255, 255, .72);
  border-color: rgba(0, 0, 0, .14);
  color: var(--text);
}

:root[data-theme="light"] .pickerBtn:hover {
  border-color: rgba(200, 16, 46, .45);
  background: rgba(255, 255, 255, .90);
}

:root[data-theme="light"] .pickerMenu {
  background:
    linear-gradient(180deg, rgba(200, 16, 46, .10), rgba(200, 16, 46, .04) 18%, rgba(255, 255, 255, .94) 40%, rgba(245, 246, 248, .96));
  border-color: rgba(200, 16, 46, .30);
}

:root[data-theme="light"] .pickerItem {
  color: rgba(0, 0, 0, .86);
}

:root[data-theme="light"] .pickerItem:hover {
  background: rgba(0, 0, 0, .04);
  border-color: rgba(0, 0, 0, .06);
}

:root[data-theme="light"] .pickerItem[aria-selected="true"] {
  background: linear-gradient(180deg, rgba(200, 16, 46, .14), rgba(200, 16, 46, .07));
  border-color: rgba(200, 16, 46, .26);
}

.gridwrapShell {
  position: relative;
  z-index: 1;
}

.gridwrap {
  overflow: auto;
  max-height: calc(100dvh - 210px);
  scrollbar-width: none;
  -ms-overflow-style: none;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, .02), rgba(0, 0, 0, .08));

}

.gridwrap::-webkit-scrollbar {
  width: 0;
  height: 0;
}

.gridScrollRail {
  position: absolute;
  top: 12px;
  right: 5px;
  bottom: 12px;
  width: var(--scrollbar-size);
  z-index: 25;
  border-radius: var(--scrollbar-radius);
  background: var(--scrollbar-track-bg);
}

.gridScrollThumb {
  width: 100%;
  z-index: 26;
  border-radius: var(--scrollbar-radius);
  background: var(--scrollbar-thumb-bg);
  border: var(--scrollbar-thumb-border);
  cursor: grab;
}

.gridScrollThumb:hover {
  background: var(--scrollbar-thumb-bg-hover);
}

.gridScrollThumb.dragging {
  background: var(--scrollbar-thumb-bg-hover);
}

.gridScrollThumb:active {
  cursor: grabbing;
}

.gridScrollRailHorizontal {
  position: absolute;
  left: 12px;
  right: 12px;
  bottom: 5px;
  height: var(--scrollbar-size);
  z-index: 25;
  border-radius: var(--scrollbar-radius);
  background: var(--scrollbar-track-bg);
}

.gridScrollThumbHorizontal {
  height: 100%;
  z-index: 26;
  border-radius: var(--scrollbar-radius);
  background: var(--scrollbar-thumb-bg);
  border: var(--scrollbar-thumb-border);
  cursor: grab;
}

.gridScrollThumbHorizontal:hover {
  background: var(--scrollbar-thumb-bg-hover);
}

.gridScrollThumbHorizontal.dragging {
  background: var(--scrollbar-thumb-bg-hover);
}

.gridScrollThumbHorizontal:active {
  cursor: grabbing;
}

.grid {
  display: grid;
  min-width: 1100px;
  position: relative;
}

.today-band {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  width: 0;
  background: var(--today);
  box-shadow:
    inset 1px 0 0 rgba(200, 16, 46, .36),
    inset -1px 0 0 rgba(200, 16, 46, .20);
  pointer-events: none;
  z-index: 1;
}

.cell {
  border-right: 1px solid var(--grid-2);
  border-bottom: 1px solid var(--grid-2);
  padding: 8px;
  min-height: 40px;
  position: relative;
  z-index: 2;

  background:
    linear-gradient(180deg, rgba(255, 255, 255, .028), rgba(255, 255, 255, .018));
  transition: background .12s ease;
}

.cell:hover {
  background: rgba(255, 255, 255, .045);
}

.hdr {
  position: sticky;
  top: 0;
  z-index: 5;
  background:
    linear-gradient(180deg, rgba(22, 26, 34, .92), rgba(18, 21, 28, .78));
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(200, 16, 46, .18);
}

.namecol {
  position: sticky;
  left: 0;
  z-index: 4;
  background:
    linear-gradient(180deg, rgba(22, 26, 34, .92), rgba(18, 21, 28, .78));
  backdrop-filter: blur(10px);
  border-right: 1px solid rgba(200, 16, 46, .12);
}

.hdr.namecol {
  z-index: 7;
  display: flex;
  align-items: center;
}

/* Top-left header cell: keep label vertically centered */
.hdr.namecol .groupRow {
  width: 100%;
  justify-content: flex-start;
}

.teamHeader.clickable {
  cursor: pointer;
}

.teamHeader.clickable:hover {
  background:
    linear-gradient(180deg, var(--team-cell-hover), rgba(200, 16, 46, .08));
}

.teamHeader.clickable:active {
  background:
    linear-gradient(180deg, var(--team-cell-active), rgba(200, 16, 46, .12));
}

.teamHeader.clickable:focus-visible {
  outline: none;
  box-shadow: inset 0 0 0 2px rgba(200, 16, 46, .52);
}

.dayhdr {
  text-align: center;
  font-weight: 980;
  padding: 10px 6px;
}

.dayhdr .dow {
  display: block;
  margin-top: 3px;
  font-size: 11px;
  color: var(--muted);
  font-weight: 850;
  letter-spacing: .03em;
}

/* Weekend: neutral separation (no blue) */
.wknd {
  background: rgba(255, 255, 255, .032) !important;
}

.todayhdr {
  background: rgba(200, 16, 46, .22) !important;
}

/* Keep blur generally, but disable it on highlighted header cells to prevent seam artifacts */
.dayhdr.wknd,
.dayhdr.todayhdr {
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
}

.groupRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  font-weight: 950;
}

.groupMeta {
  font-size: 12px;
  font-weight: 850;
  color: var(--muted);
}

.caret {
  font-weight: 980;
  color: rgba(200, 16, 46, .92);
  user-select: none;
}

.person {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.person .n {
  font-weight: 900;
  letter-spacing: .01em;
}

.indicator {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  margin: 0;
  font-weight: 950;
  font-size: 12px;
  letter-spacing: .02em;
  line-height: 1;
  border: 1px solid rgba(0, 0, 0, .25);
  user-select: none;
}

.i-work {
  background: var(--work);
}

.i-work::after {
  content: "";
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(0, 0, 0, .18);
}

.i-off {
  background: transparent;
  border: 2px solid var(--off);
}

.i-vac {
  background: var(--vac);
  color: #061625;
}

.i-hldy {
  background: var(--hldy);
  color: #2a1b04;
}

.i-oot {
  background: var(--oot);
  color: #0b0620;
}

.indicator .glyph {
  display: block;
  line-height: 1;
  font-variant-ligatures: none;
}

.indicator .glyph.oot {
  font-size: 9px;
  letter-spacing: .02em;
}

.center {
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}

/* Footer bar: last row, single full-width cell inside the grid */
.footerBar {
  grid-column: 1 / -1;
  height: 18px;
  background: rgba(255, 255, 255, .012);
  border-top: 1px solid var(--grid-2);
  border-bottom-left-radius: 14px;
  border-bottom-right-radius: 14px;
}

:root[data-theme="light"] .footerBar {
  background: rgba(0, 0, 0, .02);
}

.teamSetupBackdrop {
  position: fixed;
  inset: 0;
  z-index: 90;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  background: var(--modal-backdrop);
  backdrop-filter: blur(4px);
}

.teamSetupModal {
  width: min(1080px, calc(100dvw - 40px));
  height: min(760px, calc(100dvh - 40px));
  overflow: hidden;
  border: 1px solid var(--modal-border);
  border-radius: 16px;
  background: var(--modal-surface);
  box-shadow: var(--shadow);
  position: relative;
}

.teamSetupModalScroll {
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  padding-right: 10px;
  display: flex;
  flex-direction: column;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.teamSetupHeader {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 14px;
  padding: 16px;
  border-bottom: 1px solid var(--grid-2);
}

.teamSetupHeader h2 {
  margin: 0;
  font-size: 20px;
  line-height: 1.2;
}

.teamSetupHeader p {
  margin: 6px 0 0;
  color: var(--muted);
}

.teamSetupBody {
  display: grid;
  grid-template-columns: minmax(160px, 220px) 1fr;
  min-height: 0;
  flex: 1;
  overflow: visible;
}

.teamSetupNav {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 14px;
  border-right: 1px solid var(--grid-2);
}

.teamSetupNavBtn {
  appearance: none;
  border: 1px solid transparent;
  border-radius: 12px;
  background: transparent;
  color: var(--text);
  text-align: left;
  padding: 10px 12px;
  font-weight: 850;
  cursor: pointer;
}

.teamSetupNavBtn:hover {
  background: var(--interactive-bg-hover);
  border-color: var(--interactive-border);
}

.teamSetupNavBtn.active {
  background: linear-gradient(180deg, var(--accent-2), var(--accent-3));
  border-color: var(--modal-border);
}

.teamSetupPanel {
  padding: 16px;
  overflow: visible;
}

.setupSection h3 {
  margin: 0;
  font-size: 18px;
}

.usersPaneHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.setupSection p {
  margin: 8px 0 0;
  color: var(--muted);
}

.setupCard {
  margin-top: 14px;
  border: 1px solid var(--grid-2);
  border-radius: 12px;
  background: var(--panel-bg);
  padding: 14px;
}

.setupCard h4 {
  margin: 0;
  font-size: 14px;
  letter-spacing: .02em;
}

.tableWrap {
  max-height: none;
  overflow: visible;
}

.setupGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 12px;
  margin-top: 10px;
}

.setupGrid label,
.roleFieldset {
  display: flex;
  flex-direction: column;
  gap: 8px;
  font-weight: 750;
  color: var(--muted);
}

.roleFieldset {
  margin: 0;
  padding: 10px;
  border: 1px solid var(--grid-2);
  border-radius: 10px;
}

.roleFieldset legend {
  padding: 0 6px;
  color: var(--text);
  font-weight: 850;
}

.roleFieldset label {
  flex-direction: row;
  align-items: center;
  gap: 8px;
}

.input {
  width: 100%;
  border: 1px solid var(--interactive-border);
  border-radius: 10px;
  padding: 8px 10px;
  background: var(--input-bg);
  color: var(--text);
}

.input:focus {
  outline: none;
  border-color: rgba(200, 16, 46, .72);
  box-shadow: var(--focus-ring);
}

.setupUserCombo {
  position: relative;
}

.setupUserComboList {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  right: 0;
  max-height: 260px;
  overflow: auto;
  border-radius: 10px;
  border: 1px solid var(--interactive-border);
  background: var(--panel-bg);
  box-shadow: 0 16px 36px rgba(0, 0, 0, 0.2);
  padding: 6px;
  display: grid;
  gap: 4px;
  z-index: 20;
}

.setupUserComboItem {
  width: 100%;
  text-align: left;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text);
  border-radius: 8px;
  padding: 9px 10px;
}

button.setupUserComboItem {
  cursor: pointer;
}

button.setupUserComboItem:hover {
  background: var(--interactive-bg-hover);
  border-color: var(--interactive-border-hover);
}

.setupUserComboStatus {
  color: var(--muted);
}

.setupUserComboError {
  color: #c64040;
}

.setupTable {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

.setupTable th,
.setupTable td {
  text-align: left;
  border-bottom: 1px solid var(--grid-2);
  padding: 9px 8px;
  vertical-align: middle;
}

.setupTable th {
  background: var(--table-header-bg);
  font-size: 12px;
  letter-spacing: .02em;
  color: var(--muted);
}

.tableSortBtn {
  appearance: none;
  border: 0;
  background: transparent;
  color: inherit;
  padding: 0;
  font: inherit;
  font-weight: 850;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.tableSortBtn:hover {
  color: var(--text);
}

.sortIndicator {
  display: inline-block;
  min-width: 12px;
  text-align: center;
  opacity: .5;
  color: var(--muted);
}

.sortIndicator.active {
  opacity: 1;
  color: var(--text);
}

.setupActions {
  margin-top: 12px;
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.readOnlyField {
  display: flex;
  flex-direction: column;
  gap: 6px;
  border: 1px solid var(--grid-2);
  border-radius: 10px;
  background: var(--input-bg);
  padding: 9px 10px;
}

.readOnlyLabel {
  font-size: 12px;
  color: var(--muted);
  font-weight: 850;
}

.userSummaryCard {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 3px;
  border: 1px solid var(--grid-2);
  border-radius: 10px;
  background: var(--input-bg);
  padding: 9px 10px;
}

.userSummaryName {
  font-weight: 900;
}

.userSummaryEmail {
  color: var(--muted);
}

.iconSquareBtn {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  border: 1px solid var(--interactive-border);
  background: var(--interactive-bg);
  color: var(--text);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.iconSquareBtn:hover {
  background: var(--interactive-bg-hover);
  border-color: var(--interactive-border-hover);
}

.iconSquareBtn svg {
  width: 16px;
  height: 16px;
  stroke: currentColor;
  stroke-width: 2.2;
  fill: none;
  stroke-linecap: round;
}

.iconActionBtn {
  border: 1px solid var(--interactive-border);
  background: var(--interactive-bg);
  color: var(--text);
  border-radius: 10px;
  padding: 7px 10px;
  font-weight: 850;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 7px;
}

.iconActionBtn:hover {
  background: var(--interactive-bg-hover);
  border-color: var(--interactive-border-hover);
}

.iconActionBtn svg {
  width: 14px;
  height: 14px;
  stroke: currentColor;
  stroke-width: 2.1;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.actionBtn {
  width: 160px;
  justify-content: center;
}

.calendarPlusIcon .iconPlus {
  stroke-width: 2.8;
}

.srOnly {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  margin: -1px !important;
  padding: 0 !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.teamSetupModalScroll::-webkit-scrollbar {
  width: 0;
  height: 0;
}

.teamSetupScrollRail {
  position: absolute;
  top: 12px;
  right: 5px;
  bottom: 12px;
  width: var(--scrollbar-size);
  border-radius: var(--scrollbar-radius);
  background: var(--scrollbar-track-bg);
}

.teamSetupScrollThumb {
  width: 100%;
  border-radius: var(--scrollbar-radius);
  background: var(--scrollbar-thumb-bg);
  border: var(--scrollbar-thumb-border);
  cursor: grab;
}

.teamSetupScrollThumb:hover {
  background: var(--scrollbar-thumb-bg-hover);
}

.teamSetupScrollThumb.dragging {
  background: var(--scrollbar-thumb-bg-hover);
}

.teamSetupScrollThumb:active {
  cursor: grabbing;
}

body.team-modal-open {
  overflow: hidden;
}

.iconActionBtn.primary {
  background: linear-gradient(180deg, rgba(200, 16, 46, .46), rgba(200, 16, 46, .18));
  border-color: rgba(200, 16, 46, .62);
}

.iconActionBtn.primary:hover {
  background: linear-gradient(180deg, rgba(200, 16, 46, .56), rgba(200, 16, 46, .20));
}

.iconActionBtn.danger {
  border-color: rgba(200, 16, 46, .46);
  color: rgba(255, 170, 170, .95);
}

.iconActionBtn.danger:hover {
  background: rgba(200, 16, 46, .14);
}

@media (max-width: 900px) {
  .monthbar-inner {
    flex-direction: column;
    align-items: flex-start;
  }

  .gridwrap {
    max-height: calc(100dvh - 250px);
  }
}

/* ---------------- Light mode ---------------- */
:root[data-theme="light"] {
  --bg-0: #f2f3f5;
  --bg-1: #f7f8fa;
  --bg-2: #ffffff;

  --text: rgba(0, 0, 0, .86);
  --muted: rgba(0, 0, 0, .60);
  --faint: rgba(0, 0, 0, .45);

  --grid-1: rgba(0, 0, 0, .12);
  --grid-2: rgba(0, 0, 0, .08);

  --shadow: 0 18px 48px rgba(0, 0, 0, .18);
  --shadow-soft: 0 10px 26px rgba(0, 0, 0, .14);

  --off: rgba(0, 0, 0, .22);
  --today: rgba(200, 16, 46, .08);

  --interactive-bg: rgba(255, 255, 255, .72);
  --interactive-bg-hover: rgba(255, 255, 255, .90);
  --interactive-border: rgba(0, 0, 0, .14);
  --interactive-border-hover: rgba(200, 16, 46, .45);

  --team-cell-hover: rgba(200, 16, 46, .12);
  --team-cell-active: rgba(200, 16, 46, .16);

  --modal-backdrop: rgba(0, 0, 0, .22);
  --modal-surface: linear-gradient(180deg, rgba(200, 16, 46, .10), rgba(200, 16, 46, .05) 20%, rgba(255, 255, 255, .96) 56%, rgba(245, 246, 248, .98));
  --modal-border: rgba(192, 132, 142, 1);
  --panel-bg: rgba(255, 255, 255, .68);
  --table-header-bg: rgba(0, 0, 0, .04);
  --input-bg: rgba(255, 255, 255, .95);

  --scrollbar-track-bg: rgba(0, 0, 0, .08);
  --scrollbar-thumb-bg: rgba(200, 16, 46, .34);
  --scrollbar-thumb-bg-hover: rgba(200, 16, 46, .44);
  --scrollbar-thumb-border: 1px solid rgba(255, 255, 255, .75);
}

:root[data-theme="light"] body {
  background:
    radial-gradient(1100px 520px at 50% -10%, rgba(200, 16, 46, .18), transparent 60%),
    radial-gradient(900px 520px at 12% 14%, rgba(0, 0, 0, .04), transparent 62%),
    radial-gradient(900px 520px at 88% 14%, rgba(0, 0, 0, .03), transparent 62%),
    linear-gradient(180deg, var(--bg-2), var(--bg-0));
}

:root[data-theme="light"] body::before {
  opacity: .28;
  mix-blend-mode: multiply;
  background:
    repeating-linear-gradient(135deg, rgba(0, 0, 0, .030) 0, rgba(0, 0, 0, .030) 1px, transparent 1px, transparent 12px),
    radial-gradient(1200px 600px at 50% 20%, rgba(0, 0, 0, .035), transparent 65%);
}

:root[data-theme="light"] .card {
  background: rgba(255, 255, 255, .72);
  border: 1px solid rgba(200, 16, 46, .42);
  border-radius: 14px;
}

:root[data-theme="light"] .topbar {
  background: linear-gradient(180deg, rgba(200, 16, 46, .14), rgba(200, 16, 46, .06) 60%, rgba(0, 0, 0, .02));
  border-bottom-color: rgba(200, 16, 46, .20);
}

:root[data-theme="light"] .legend {
  background: linear-gradient(180deg, rgba(0, 0, 0, .02), rgba(0, 0, 0, .04));
  border-bottom-color: rgba(0, 0, 0, .08);
}

:root[data-theme="light"] .monthbar {
  background: linear-gradient(90deg, rgba(200, 16, 46, .18) 0, rgba(200, 16, 46, .06) 24%, rgba(0, 0, 0, .02) 62%, rgba(0, 0, 0, .04) 100%);
  border-bottom-color: rgba(0, 0, 0, .08);
}

:root[data-theme="light"] .btn,
:root[data-theme="light"] .modeToggle,
:root[data-theme="light"] select {
  background: var(--interactive-bg);
  border-color: var(--interactive-border);
  color: var(--text);
}

:root[data-theme="light"] .btn:hover,
:root[data-theme="light"] .modeToggle:hover {
  background: var(--interactive-bg-hover);
  border-color: var(--interactive-border-hover);
}

:root[data-theme="light"] .gridwrap {
  background: linear-gradient(180deg, rgba(255, 255, 255, .60), rgba(0, 0, 0, .02));
}

:root[data-theme="light"] .cell {
  background: linear-gradient(180deg, rgba(255, 255, 255, .82), rgba(250, 250, 251, .72));
  border-right-color: rgba(0, 0, 0, .08);
  border-bottom-color: rgba(0, 0, 0, .08);
}

:root[data-theme="light"] .cell:hover {
  background: rgba(255, 255, 255, .95);
}

:root[data-theme="light"] .hdr,
:root[data-theme="light"] .namecol {
  background: linear-gradient(180deg, rgba(245, 246, 248, .92), rgba(235, 237, 240, .82));
  border-bottom-color: rgba(200, 16, 46, .14);
  border-right-color: rgba(200, 16, 46, .10);
}

:root[data-theme="light"] .wknd {
  background: linear-gradient(180deg, rgba(0, 0, 0, .03), rgba(0, 0, 0, .05)) !important;
}

@media (max-width: 900px) {
  .teamSetupBackdrop {
    padding: 12px;
    align-items: flex-start;
  }

  .teamSetupModal {
    width: 100%;
    height: calc(100dvh - 24px);
  }

  .teamSetupBody {
    display: block;
  }

  .teamSetupNav {
    flex-direction: row;
    border-right: 0;
    border-bottom: 1px solid var(--grid-2);
    overflow-x: auto;
  }
}
